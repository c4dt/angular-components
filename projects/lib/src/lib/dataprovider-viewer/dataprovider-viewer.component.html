<ng-container *ngIf="table === null || table === undefined"
  >loading dataset...</ng-container
>
<ng-container *ngIf="table !== null && table !== undefined">
  <cdk-virtual-scroll-viewport style="height: 100%" itemSize="1">
    <mat-table [dataSource]="table.columns.toJS()">
      <ng-container
        *ngFor="let column of table.columns.toJS(); index as columnIndex"
        matColumnDef="{{ column[0] }}"
      >
        <mat-header-cell *matHeaderCellDef> {{ column[0] }} </mat-header-cell>

        <mat-cell *matCellDef="let _; index as rowIndex">
          <ng-container *ngIf="column[1].kind === 'date/years'">
            {{ get(columnIndex, rowIndex) | date: "yyyy" }}
          </ng-container>
          <ng-container *ngIf="column[1].kind === 'date/days'">
            {{ get(columnIndex, rowIndex) | date }}
          </ng-container>
          <ng-container *ngIf="column[1].kind === 'multiplied'">
            {{ get(columnIndex, rowIndex) | number }}
          </ng-container>
          <ng-container *ngIf="column[1].kind === 'string'">
            {{ get(columnIndex, rowIndex) }}
          </ng-container>
        </mat-cell>
      </ng-container>

      <mat-header-row
        *matHeaderRowDef="headersName.toJS(); sticky: true"
      ></mat-header-row>

      <mat-row *matRowDef="let _; columns: headersName.toJS()"></mat-row>
    </mat-table>
  </cdk-virtual-scroll-viewport>
</ng-container>

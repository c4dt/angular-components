<ng-container *ngIf="table === null || table === undefined">
  Loading dataset...
</ng-container>
<ng-container *ngIf="table !== null && table !== undefined">
  <cdk-virtual-scroll-viewport style="height: 100%" itemSize="1">
    <mat-table [dataSource]="table.columns.get(0).rows.toJS()">
      <ng-container
        *ngFor="let column of table.columns; index as columnIndex"
        matColumnDef="{{ column.name }}"
      >
        <mat-header-cell *matHeaderCellDef> {{ column.name }} </mat-header-cell>

        <mat-cell *matCellDef="let _; index as rowIndex">
          <ng-container *ngIf="columnTypes[columnIndex] === 'date/years'">
            {{ get(columnIndex, rowIndex) | date: "yyyy" }}
          </ng-container>
          <ng-container *ngIf="columnTypes[columnIndex] === 'date/days'">
            {{ get(columnIndex, rowIndex) | date }}
          </ng-container>
          <ng-container *ngIf="columnTypes[columnIndex] === 'number'">
            {{
              get(columnIndex, rowIndex)
                | number: "1." + column.decimalCount + "-" + column.decimalCount
            }}
          </ng-container>
          <ng-container
            *ngIf="
              columnTypes[columnIndex] === 'string' ||
              columnTypes[columnIndex] === 'boolean'
            "
          >
            {{ get(columnIndex, rowIndex) }}
          </ng-container>
        </mat-cell>
      </ng-container>

      <mat-header-row
        *matHeaderRowDef="headersName.toJS(); sticky: true"
      ></mat-header-row>

      <mat-row *matRowDef="let row; columns: headersName.toJS()"></mat-row>
    </mat-table>
  </cdk-virtual-scroll-viewport>
</ng-container>
